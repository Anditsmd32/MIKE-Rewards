<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Holdings Checker</title>
</head>
<body>
    <h1>Token Holdings Checker</h1>
    <label for="walletAddress">Enter Wallet Address:</label>
    <input type="text" id="walletAddress" placeholder="0x...">
    <button onclick="getTokenHoldings()">Check Holdings</button>

    <div id="tokenHoldings"></div>

    <script>
        async function getTokenHoldings() {
            const walletAddress = document.getElementById('walletAddress').value;
            const apiUrl = `https://api.scan.pulsechain.com/api?module=account&action=tokenlist&address=${walletAddress}`;

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.message === 'OK') {
                    const tokenList = [
                        '0x5b17a3d673c47c30a1e87e238dd31ad437158141',
                        '0x75da7f3e6811e56b6f8e0a21ea79cffaef0fc2b8',
                        '0x47273ee3360b936e1c9f2bc808da76e1df4b43c4',
                        '0x282cecf3fef68cf38ee3e3880f69572c376b9cc1',
                        '0x737fd5b88524d0b90b984ba4f64a6b81b1a1dbc0',
                        '0xfa9ff85e0df45752df23d65d3b91e2b788c197bf',
                        '0x61496615a3cc5f3bed6dad8cf3945cb6d7765f02',
                        '0x99d6c086bf13f8dc7858629ca637fb900bb58925'
                    ];

                    const tokenHoldings = data.result
                        .filter(token => tokenList.includes(token.contractAddress.toLowerCase()))
                        .map(token => {
                            const balanceInEth = Number(token.balance) / 10 ** Number(token.decimals);
                            return {
                                contractAddress: token.contractAddress,
                                balance: balanceInEth.toFixed(6), // Format balance according to decimal places
                                decimals: token.decimals,
                                name: token.name,
                                symbol: token.symbol
                            };
                        });

                    displayTokenHoldings(tokenHoldings);
                } else {
                    console.error('Error fetching token holdings:', data.message);
                }
            } catch (error) {
                console.error('Error fetching token holdings:', error);
            }
        }

        function displayTokenHoldings(tokenHoldings) {
            const tokenHoldingsDiv = document.getElementById('tokenHoldings');
            tokenHoldingsDiv.innerHTML = '';

            if (tokenHoldings.length > 0) {
                const table = document.createElement('table');
                const headerRow = table.insertRow(0);

                const headers = ['Contract Address', 'Balance', 'Decimals', 'Name', 'Symbol'];
                headers.forEach(headerText => {
                    const th = document.createElement('th');
                    th.textContent = headerText;
                    headerRow.appendChild(th);
                });

                tokenHoldings.forEach(token => {
                    const row = table.insertRow(-1);
                    Object.values(token).forEach(value => {
                        const cell = row.insertCell(-1);
                        cell.textContent = value;
                    });
                });

                tokenHoldingsDiv.appendChild(table);
            } else {
                tokenHoldingsDiv.textContent = 'No token holdings found for the specified address.';
            }
        }
    </script>
</body>
</html>
